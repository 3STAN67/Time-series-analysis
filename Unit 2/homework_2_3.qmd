---
title: "Time Series Homework: Chapter 2 Lesson 3"
subtitle: "Tristan"
execute: 
  keep_md: true
  warning: false
format: 
  html:
    embed-resources: true
    toc: true
---

```{r, echo=FALSE, message=FALSE, warning=FALSE}

# Loading R packages
if (!require("pacman")) install.packages("pacman")
pacman::p_load(tidyverse, 
               tsibble, fable,
               feasts, tsibbledata,
               fable.prophet,
               patchwork,
               lubridate, 
               rio,
               ggplot2,
               kableExtra
               )
```

## Data

```{r, message=FALSE}

ind_prod <- rio::import("https://byuistats.github.io/timeseries/data/ind_prod_us.csv")

```

::: {.callout-note title="Revisions" icon="false"}
<!-- Delete this and put your homework revisions here. -->
:::

## Questions

### Question 1 - Context and Measurement (10 points)

The first part of any time series analysis is context. You cannot properly analyze data without knowing what the data is measuring. Without context, the most simple features of data can be obscure and inscrutable. This homework assignment will center around the series below.

Please research the time series. In the spaces below, give the data collection process, unit of analysis, and meaning of each observation for the series.

#### **Total US Industrial Production Index**

<https://fred.stlouisfed.org/series/IPB50001N>

::: {.callout-note title="Answer" icon="false"}
*Data collection process:*

This data is a collected using a combination of surveys, admin records, and industrial reports including Manufacturers' Shipments, Inventories, and Orders Survey (M3), Current Industrial Reports (CIR), U.S. Geological Survey (USGS), Energy Information Administration (EIA) and company reports. This data is collected monthly.

*Units of Analysis:*

This index includes the manufacturing, mining, and utilities sectors with each industry contributing to the total index base on its proportion of total industrial value added.

*Observations:*

Each monthly observation represents the level of total industrial production in the U.S. during that month relative to 2017.
:::

### Question 2 - Total US Industrial Production: Correlogram (20 points)

##### a) Please plot a correlogram of the US Industrial Production Index

::: {.callout-note title="Answer" icon="false"}
```{r}
ind_ts <- ind_prod |> 
  mutate(
    date2 = mdy(date),
    year_month = yearmonth(date2)
  ) |> 
  select(year_month, ind_prod_indx) |> 
  tsibble(
    index = year_month
  )

ind_decomp <- ind_ts |> 
  model(feasts::classical_decomposition(ind_prod_indx, type = "add")) |> 
  components()

acf(ind_ts$ind_prod_indx, plot = TRUE, type = "correlation")
  
```
:::

##### b) Please identify evidence of any trend or seasonal component using the correlogram. Please justify your findings.

::: {.callout-note title="Answer" icon="false"}
The correlogram doesn't appear to show any trend or seasonal component based on the slowly decreasing trend and not having any large swings or cycles.
:::

### Question 3 - Total US Industrial Production: Decomposition (10 points)

##### a) Please plot a decomposition of the US Industrial Production Index series. Include the original series, trend, seasonal variation, and random component.

::: {.callout-note title="Answer" icon="false"}
```{r}
#| warning: false

autoplot(ind_decomp) +
  labs(
    title = "Total US Industrial Production Decomposition",
    x = "Dates"
  ) +
  theme_bw()

```
:::

##### b) Justify your choice of decomposition model (additive vs multiplicative)

I chose to use an additive model because the seasonal component does not appear to increase in magnitude as the trend rises. Examining the random component provides a good indication of how well the trend and seasonal components capture variation in the data, and it performs reasonably well, remaining centered around zero for most of the period. Although there are a few large deviations, these could correspond to major economic events such as the 2008 financial crisis and the 2020 COVID-19 pandemic.

::: {.callout-note title="Answer" icon="false"}
```{r}
ind_sub <- ind_prod |> 
  mutate(date2 = mdy(date)) |> 
  filter(date2 > "1980-01-01")

ggplot(ind_sub, aes(x = date2, y = ind_prod_indx)) +
  geom_line() +
  labs(
    title = "US Total Industrial Production Index (1980-2025)",
    x = "Dates",
    y = "Index Level"
  ) +
  theme_bw() + 
  theme(plot.title = element_text(hjust = 0.5))
```
:::

### Question 4 - Total US Industrial Production: Stationary Series (20 points)

##### a) Please plot a correlogram of the random component of the US Industrial Production Index

::: {.callout-note title="Answer" icon="false"}
```{r}

acf(ind_decomp$random |> na.omit(), plot = TRUE, type = "correlation")

```
:::

##### b) Please interpret the correlogram of the random component of the US Industrial Production Index. Include descriptions of the statistical and practical significance of the results. Be careful to justify the cases when a statistically significant correlation is not practically significant.

::: {.callout-note title="Answer" icon="false"}
The correlogram of the random component shows roughly 15 statistically significant bars. Many of these significant lags occur at intervals of about three months, indicating a possible quarterly seasonal correlation. While most of the negative seasonal bars are relatively small, the positive ones appear more substantial, reaching values around 0.4, implying they may hold practical significance..
:::

### Question 5 - US Industrial Production Index: Introspection (20 points)

##### a) Why is it important to remove trend and seasonal variation before plotting and analyzing correlograms?

::: {.callout-note title="Answer" icon="false"}
The trend and seasonal components can introduce substantial noise into the correlogram, potentially obscuring significant patterns or correlations. This effect is evident when comparing the overall correlogram with the one based on the random component. While the original correlogram offers limited interpretability, the random componentâ€™s correlogram provides clearer and more meaningful insights.
:::

##### b) Please speculate on the importance of autocorrelation analysis of the random component of time series data on its modeling and investigation?

::: {.callout-note title="Answer" icon="false"}
Significant correlation in the random component could be a sign that the model does not capture the full seasonality or trend in the data. This could affect forecasting accuracy or insights drawn from the model.
:::

### Rubric

+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Criteria**                                     | **Mastery (10)**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 1: Context and Measurement**          | The student thoroughly researches the data collection process, unit of analysis, and meaning of each observation for both the requested time series. Clear and comprehensive explanations are provided.                                                                                                                                                                                                                                                                       | The student does not adequately research or provide information on the data collection process, unit of analysis, and meaning of each observation for the specified series.                                                                                                                                                                                                                                                                           |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (5)**                                                                                                                                                                                                                                                                                                                                                                                                                                                               | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 2a: Correlogram**                     | The student plots a correlogram of the time series requested. The plot accurately displays autocorrelation values at various lags. If code is well-commented, providing clarity on the plotting process. The labels, title, and legends are appropriate and match the quality of the illustrations in the Time Series notebook.                                                                                                                                               | The student attempts to plot a correlogram of the time series requested but encounters significant errors or lacks clarity in their plot. If code is used, it may lack sufficient commenting or coherence, making it challenging to understand the plotting process. Overall, the plot may lack detail or accuracy, highlighting areas for improvement in time series visualization skills.                                                           |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (15)**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 2b: Interpretation**                  | The student effectively interprets the correlogram to identify evidence of trend or seasonal components in the time series. Their description matches the textbook description in page 37.                                                                                                                                                                                                                                                                                    | The student attempts to interpret the correlogram but encounters errors or lacks clarity in their analysis. There may be inaccuracies in interpreting autocorrelation values or misinterpretation of the findings, indicating a limited understanding of correlogram analysis techniques. Overall, the justification for findings may lack depth or accuracy.                                                                                         |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (5)**                                                                                                                                                                                                                                                                                                                                                                                                                                                               | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 3a: Decomposition**                   | The student plots a decomposition of the US Industrial Production Index series, including the original series, trend, seasonal variation, and random component. The code is well-commented, providing clarity on the decomposition process. The labels, title, and legends are appropriate and enhance the understanding of the plot, matching the quality of illustrations in the Time Series notebook.                                                                      | The student attempts to plot a decomposition of the US Industrial Production Index series but encounters significant errors or lacks clarity in their plot. The code lacks sufficient commenting or coherence, making it challenging to understand the decomposition process. Overall, the plot may lack detail or accuracy.                                                                                                                          |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (5)**                                                                                                                                                                                                                                                                                                                                                                                                                                                               | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 3b: Modeling Justification**          | Provides a well-reasoned justification for choosing either the additive or multiplicative decomposition model, clearly explaining how the data's characteristics (e.g., seasonality, trend) influence the choice. \| Fails to provide a clear or logical justification, or the explanation is incorrect or unsupported by the data's characteristics.                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (5)**                                                                                                                                                                                                                                                                                                                                                                                                                                                               | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 4a: Correlogram of random component** | The student plots a correlogram of the time series requested. The plot accurately displays autocorrelation values at various lags. If code is well-commented, providing clarity on the plotting process. The labels, title, and legends are appropriate and match the quality of the illustrations in the Time Series notebook.                                                                                                                                               | The student attempts to plot a correlogram of the time series requested but encounters significant errors or lacks clarity in their plot. If code is used, it may lack sufficient commenting or coherence, making it challenging to understand the plotting process. Overall, the plot may lack detail or accuracy, highlighting areas for improvement in time series visualization skills.                                                           |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (15)**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 4b: Interpretation**                  | Clearly interprets the correlogram, explaining the statistical significance of correlations and addressing practical significance. Provides well-reasoned justification for when statistically significant correlations are not practically important. \| Fails to interpret the correlogram accurately, does not explain statistical or practical significance clearly, or provides weak justification for distinguishing between statistical and practical significance. \| |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (10)**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 5a: Introspection**                   | The student explains the importance of removing trend and seasonal variation before analyzing correlograms, showing an understanding of stationarity assumptions in time series analysis. They recognize that trend and seasonality violate these assumptions, potentially distorting autocorrelation patterns.                                                                                                                                                               | The student attempts to explain the importance of removing trend and seasonal variation before analyzing correlograms but may struggle with clarity or accuracy. Their understanding of stationarity assumptions in time series analysis might be limited, leading to inconsistencies or inaccuracies. Overall, their explanation may lack depth, indicating areas for improvement in understanding preprocessing steps and stationarity assumptions. |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
|                                                  | **Mastery (10)**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Incomplete (0)**                                                                                                                                                                                                                                                                                                                                                                                                                                    |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Question 5b: Introspection**                   | The student effectively speculates on the importance of autocorrelation analysis of the random component in time series data for modeling, investigation, and forecasting. Their discussion shows understanding of the topics we have already covered in class. The submission shows effort.                                                                                                                                                                                  | Overall, their explanation may lack depth,\                                                                                                                                                                                                                                                                                                                                                                                                           |         |
|                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | or clarity.\                                                                                                                                                                                                                                                                                                                                                                                                                                          |         |
|                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | \                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |
|                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | \                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |
|                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | \                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |
|                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | \                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |
|                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | \                                                                                                                                                                                                                                                                                                                                                                                                                                                     |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
| **Total Points**                                 | **80**                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |         |
+--------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+
